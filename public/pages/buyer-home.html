<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Handloom Weavers Nexus</title>
    <meta name="description"
        content="Discover authentic handloom sarees from India's finest artisan weavers. Shop Kanjivaram, Banarasi, and more.">
    <link rel="stylesheet" href="/css/variables.css">
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/components.css">
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/pages.css">
    <link rel="manifest" href="/manifest.json">
    <style>
        /* ============================================================
           BUYER HOME â€“ Custom styles (layered on top of design system)
           ============================================================ */

        /* Reset main-content for full-width home layout */
        .main-content {
            padding: 0 !important;
        }

        /* ---- Announcement Bar ---- */
        .home-announcement {
            background: var(--color-dark);
            color: white;
            text-align: center;
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
            letter-spacing: 0.5px;
        }

        /* ---- Hero Section ---- */
        .home-hero {
            position: relative;
            background: linear-gradient(135deg, var(--color-cream) 0%, #EDE8E0 60%, #DDD5CA 100%);
            min-height: 520px;
            display: flex;
            overflow: hidden;
        }

        .home-hero-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 4rem 2rem 4rem 4rem;
            z-index: 2;
            max-width: 520px;
        }

        .home-hero-eyebrow {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: var(--color-accent);
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .home-hero-title {
            font-family: var(--font-heading);
            font-size: clamp(2.2rem, 5vw, 3.5rem);
            line-height: 1.2;
            color: var(--color-dark);
            margin-bottom: 1.25rem;
        }

        .home-hero-title em {
            font-style: italic;
            color: var(--color-accent);
        }

        .home-hero-sub {
            font-size: 1rem;
            color: #666;
            margin-bottom: 2rem;
            line-height: 1.7;
            max-width: 400px;
        }

        .home-hero-cta {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .home-hero-images {
            flex: 1;
            position: relative;
            min-height: 420px;
        }

        .hero-img-main {
            position: absolute;
            right: 3rem;
            top: 50%;
            transform: translateY(-50%);
            width: 300px;
            height: 400px;
            object-fit: cover;
            border-radius: 160px 160px 12px 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        }

        .hero-img-side {
            position: absolute;
            right: 0rem;
            top: 50%;
            transform: translateY(-35%);
            width: 180px;
            height: 260px;
            object-fit: cover;
            border-radius: 90px 90px 8px 8px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
        }

        .hero-badge {
            position: absolute;
            left: 1rem;
            bottom: 2rem;
            background: var(--color-primary);
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: var(--radius-full);
            font-size: 0.78rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            box-shadow: var(--shadow-md);
        }

        /* ---- Marquee Offer ---- */
        .home-marquee-bar {
            background: linear-gradient(135deg, var(--color-light-red) 0%, #E74C3C 100%);
            color: white;
            padding: 0.6rem 0;
            overflow: hidden;
            display: none;
        }

        .home-marquee-bar.visible {
            display: block;
        }

        .marquee-track {
            display: flex;
            animation: homeMarquee 40s linear infinite;
            white-space: nowrap;
        }

        .marquee-track:hover {
            animation-play-state: paused;
        }

        @keyframes homeMarquee {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        .marquee-item {
            padding: 0 2.5rem;
            font-size: 0.88rem;
            font-weight: 500;
        }

        .marquee-sep {
            color: rgba(255, 255, 255, 0.4);
        }

        /* ---- Sections common ---- */
        .home-section {
            padding: 4rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .home-section-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .home-section-title {
            font-family: var(--font-heading);
            font-size: 1.8rem;
            color: var(--color-dark);
            line-height: 1.2;
        }

        .home-section-title em {
            color: var(--color-accent);
            font-style: italic;
        }

        .view-all-link {
            font-size: 0.88rem;
            color: var(--color-accent);
            text-decoration: none;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.3rem;
            border-bottom: 1px solid var(--color-accent);
            padding-bottom: 2px;
        }

        /* ---- Categories ---- */
        .cat-grid {
            margin-top: 2rem;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 2rem;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .cat-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
            color: inherit;
            transition: transform var(--transition-fast);
        }

        .cat-card:hover {
            transform: translateY(-4px);
        }

        .cat-icon-wrap {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            overflow: hidden;
            background: var(--color-surface);
            border: 3px solid var(--color-border);
            flex-shrink: 0;
        }

        .cat-icon-wrap img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .cat-name {
            font-size: 0.82rem;
            font-weight: 600;
            text-align: center;
            color: var(--color-dark);
        }

        .cat-count {
            font-size: 0.72rem;
            color: #999;
        }

        /* ---- Split promo ---- */
        .split-promo {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem 4rem;
        }

        .split-promo-card {
            border-radius: var(--radius-lg);
            overflow: hidden;
            position: relative;
            min-height: 380px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }

        .split-promo-card img {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .split-promo-overlay {
            position: relative;
            z-index: 2;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.1) 70%);
            padding: 2rem;
            color: white;
        }

        .split-promo-label {
            font-size: 0.75rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            opacity: 0.8;
            margin-bottom: 0.5rem;
        }

        .split-promo-title {
            font-family: var(--font-heading);
            font-size: 1.6rem;
            margin-bottom: 1rem;
            color: var(--color-border);
        }

        /* ---- Product Tabs ---- */
        .home-product-section {
            background: var(--color-surface);
            padding: 4rem 0;
        }

        .home-product-inner {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .product-tabs-header {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 1.25rem;
            margin-bottom: 2rem;
        }

        .product-tabs-row {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .prod-tab {
            padding: 0.45rem 1.25rem;
            border: 1.5px solid var(--color-border);
            background: white;
            border-radius: var(--radius-full);
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            color: var(--color-dark);
            transition: all var(--transition-fast);
        }

        .prod-tab.active,
        .prod-tab:hover {
            background: var(--color-accent);
            border-color: var(--color-accent);
            color: white;
        }

        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
        }

        /* ---- Product Card (smaller horizontal) ---- */
        .product-scroll {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 1.25rem;
        }

        .product-card-sm {
            background: white;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            cursor: pointer;
            transition: transform var(--transition-base), box-shadow var(--transition-base);
            position: relative;
        }

        .product-card-sm:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }

        .product-card-sm-img {
            width: 100%;
            height: 240px;
            object-fit: cover;
            display: block;
        }

        .product-card-sm-badge {
            position: absolute;
            top: 0.75rem;
            left: 0.75rem;
            background: var(--color-primary);
            color: white;
            font-size: 0.7rem;
            padding: 0.2rem 0.6rem;
            border-radius: var(--radius-full);
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .product-card-sm-body {
            padding: 0.9rem 1rem;
        }

        .product-card-sm-cat {
            font-size: 0.72rem;
            color: var(--color-accent);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .product-card-sm-title {
            font-size: 0.92rem;
            font-weight: 600;
            color: var(--color-dark);
            margin: 0.25rem 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .product-card-sm-weaver {
            font-size: 0.75rem;
            color: #999;
        }

        .product-card-sm-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.7rem 1rem;
            border-top: 1px solid var(--color-border);
            background: var(--color-surface);
        }

        .product-card-sm-price {
            font-weight: 700;
            color: var(--color-primary);
            font-size: 1rem;
        }

        .product-card-sm-btn {
            font-size: 0.75rem;
            padding: 0.35rem 0.85rem;
        }

        /* ---- Benefits Strip ---- */
        .benefits-bar {
            background: var(--color-cream);
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 3rem;
            flex-wrap: wrap;
            border-top: 1px solid var(--color-border);
            border-bottom: 1px solid var(--color-border);
        }

        .benefit-pill {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--color-dark);
        }

        .benefit-pill-icon {
            color: var(--color-accent);
            font-size: 1.3rem;
        }

        /* ---- All Sarees + Filters ---- */
        .home-filters {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
        }

        .filter-tabs {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            flex: 1;
        }

        .filter-tab {
            padding: 0.4rem 1rem;
            border: 1.5px solid var(--color-border);
            background: white;
            border-radius: var(--radius-full);
            font-size: 0.82rem;
            cursor: pointer;
            color: var(--color-dark);
            transition: all var(--transition-fast);
        }

        .filter-tab.active {
            background: var(--color-primary);
            border-color: var(--color-primary);
            color: white;
        }

        .filter-price {
            display: flex;
            gap: 0.6rem;
            align-items: center;
            font-size: 0.82rem;
        }

        .filter-price input {
            width: 90px;
            padding: 0.35rem 0.6rem;
            border: 1.5px solid var(--color-border);
            border-radius: var(--radius-md);
            font-size: 0.82rem;
        }

        /* ---- Newsletter ---- */
        .newsletter-section {
            background: linear-gradient(135deg, var(--color-dark) 0%, #2d1a1a 100%);
            padding: 5rem 2rem;
            text-align: center;
            color: white;
        }

        .newsletter-eyebrow {
            font-size: 0.78rem;
            letter-spacing: 3px;
            text-transform: uppercase;
            color: var(--color-accent);
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .newsletter-title {
            font-family: var(--font-heading);
            font-size: clamp(1.8rem, 3vw, 2.5rem);
            margin-bottom: 0.75rem;
            color: #eee;
        }

        .newsletter-sub {
            font-size: 0.95rem;
            opacity: 0.7;
            margin-bottom: 2rem;
        }

        .newsletter-form {
            display: flex;
            max-width: 460px;
            margin: 0 auto;
            gap: 0;
            border-radius: var(--radius-full);
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .newsletter-form input {
            flex: 1;
            padding: 0.9rem 1.5rem;
            border: none;
            font-size: 0.9rem;
            outline: none;
        }

        .newsletter-form button {
            padding: 0.9rem 1.5rem;
            background: var(--color-primary);
            border: none;
            color: white;
            font-weight: 700;
            font-size: 0.85rem;
            cursor: pointer;
            white-space: nowrap;
            transition: background var(--transition-fast);
        }

        .newsletter-form button:hover {
            background: var(--color-light-red);
        }

        /* ---- WhatsApp Result Box (Redesign) ---- */
        .whatsapp-result-box {
            margin-top: 2rem;
            padding: 2.5rem;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 24px;
            display: inline-block;
            max-width: 440px;
            width: 100%;
            animation: slideUpFade 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
        }

        .whatsapp-number {
            font-size: 1.2rem;
            display: block;
            margin-bottom: 1.5rem;
            color: #eee;
            font-weight: 500;
        }

        .whatsapp-number strong {
            color: var(--color-accent);
            font-size: 1.4rem;
            margin-left: 0.5rem;
        }

        .whatsapp-chat-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 1rem 2.5rem;
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            color: white;
            text-decoration: none;
            font-weight: 700;
            font-size: 1rem;
            border-radius: 100px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 8px 20px rgba(37, 211, 102, 0.3);
        }

        .whatsapp-chat-btn:hover {
            transform: scale(1.05) translateY(-2px);
            box-shadow: 0 12px 25px rgba(37, 211, 102, 0.4);
            filter: brightness(1.1);
        }

        .whatsapp-chat-btn i {
            font-size: 1.3rem;
        }

        @keyframes slideUpFade {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ---- Brand Strip ---- */
        .brand-strip {
            background: var(--color-cream);
            padding: 2rem;
            text-align: center;
            font-family: var(--font-heading);
            font-size: 3rem;
            color: var(--color-dark);
            letter-spacing: -1px;
        }

        .brand-strip span {
            color: var(--color-accent);
        }

        /* ---- Responsive ---- */
        @media (max-width: 768px) {
            .home-hero {
                flex-direction: column;
                min-height: auto;
            }

            .home-hero-content {
                padding: 2rem;
                max-width: 100%;
            }

            .home-hero-images {
                display: none;
            }

            .split-promo {
                grid-template-columns: 1fr;
            }

            .benefits-bar {
                gap: 1.5rem;
            }

            .home-section {
                padding: 2.5rem 1rem;
            }

            .hero-img-main {
                display: none;
            }

            .hero-img-side {
                display: none;
            }
        }
    </style>
</head>

<body>
    <div class="app-shell">
        <div id="header-placeholder"></div>
        <div id="sidebar-placeholder"></div>
        <main class="main-content">

            <!-- 1. ANNOUNCEMENT BAR -->
            <div class="home-announcement" id="announcement-bar">
                Free shipping on orders above â‚¹2,000 &nbsp;|&nbsp; Authentic handloom from artisan weavers &nbsp;|&nbsp;
                All India delivery
            </div>

            <!-- 2. LIVE OFFER MARQUEE (shown only when offers exist) -->
            <div class="home-marquee-bar" id="offer-marquee-bar">
                <div class="marquee-track" id="marquee-track"></div>
            </div>

            <!-- 3. HERO SECTION -->
            <section class="home-hero" id="hero-section">
                <div class="home-hero-content">
                    <p class="home-hero-eyebrow">âœ¦ New Season Collection</p>
                    <h1 class="home-hero-title">Aesthetic <em>Collections</em> with Finest Craft</h1>
                    <p class="home-hero-sub" id="hero-subtitle">Our sarees are a reflection of your elegance. Premium
                        handloom directly from artisan weavers across India.</p>
                    <div class="home-hero-cta" id="hero-cta">
                        <a href="/pages/register.html" class="btn btn-primary"
                            style="border-radius: var(--radius-full); padding: 0.75rem 2rem;">Start Shopping</a>
                        <a href="/pages/login.html" class="btn btn-secondary"
                            style="border-radius: var(--radius-full); padding: 0.75rem 2rem;">Login</a>
                    </div>
                </div>
                <div class="home-hero-images" style="gap: 1.5rem;">
                    <img class="hero-img-side" src="/assets/images/sarees/saree_012.jpg" alt="Saree collection"
                        style="width: 160px; height: 350px; object-fit: cover; border-radius: 100px; margin-top: 5rem; box-shadow: 0 20px 40px rgba(0,0,0,0.1);">
                    <img class="hero-img-main" src="/assets/images/sarees/saree_018.jpeg"
                        alt="Featured saree collection" id="hero-img-main"
                        style="width: 280px; height: 450px; border-radius: 150px 150px 0 0;">
                    <img class="hero-img-side" src="/assets/images/sarees/saree_001.jpeg" alt="Saree collection"
                        id="hero-img-side"
                        style="width: 200px; height: 300px; border-radius: 0 100px 100px 100px; transform: translateY(2rem);">
                    <span class="hero-badge" id="hero-badge"
                        style="left: 0; bottom: 2rem; transform: translateX(-50%);">âœ¦ New Arrivals 2026</span>
                </div>
            </section>

            <!-- 4. TOP CATEGORIES -->
            <section class="home-section">
                <div class="home-section-header">
                    <div>
                        <h2 class="home-section-title">Top Categories &nbsp;<em>Collections</em></h2>
                        <p style="color:#999; font-size:0.88rem; margin-top:0.3rem;">Explore by weave type and region
                        </p>
                    </div>
                    <a href="/pages/buyer-home.html#all-sarees" class="view-all-link">
                        View All â€º
                    </a>
                </div>
                <div class="cat-grid" id="category-grid">
                    <!-- Injected by JS -->
                    <div class="cat-card" style="opacity:0.4;">
                        <div class="cat-icon-wrap" style="background:#eee;"></div>
                        <span class="cat-name">Loading...</span>
                    </div>
                </div>
            </section>

            <!-- 5. SPLIT PROMO CARDS -->
            <div class="split-promo">
                <div class="split-promo-card">
                    <img src="/assets/images/sarees/saree_014.jpg" alt="Kanjivaram Silk Collection">
                    <div class="split-promo-overlay">
                        <p class="split-promo-label">âœ¦ Featured Collection</p>
                        <h3 class="split-promo-title">Explore Our <em>Newest</em> Products</h3>
                        <a href="/pages/buyer-home.html#featured-sarees" class="btn btn-primary"
                            style="border-radius:var(--radius-full); font-size:0.85rem; padding:0.5rem 1.5rem;">Shop
                            Now</a>
                    </div>
                </div>
                <div class="split-promo-card">
                    <img src="/assets/images/sarees/saree_003.jpg" alt="Bridal Silk Collection">
                    <div class="split-promo-overlay">
                        <p class="split-promo-label">âœ¦ For wedding wear</p>
                        <h3 class="split-promo-title">Bridal <em>Sarees</em> & Special Occasions</h3>
                        <a href="/pages/buyer-home.html#all-sarees" class="btn btn-primary"
                            style="border-radius:var(--radius-full); font-size:0.85rem; padding:0.5rem 1.5rem;">Explore</a>
                    </div>
                </div>
            </div>

            <!-- 6. FEATURED PRODUCTS WITH TABS -->
            <section class="home-product-section" id="featured-sarees">
                <div class="home-product-inner">
                    <div class="home-section-header">
                        <div class="product-tabs-header">
                            <h2 class="home-section-title">Explore Our <em>Newest</em> Products</h2>
                            <div class="product-tabs-row" id="product-tab-btns">
                                <button class="prod-tab active" data-tab="featured">Featured</button>
                                <button class="prod-tab" data-tab="new">New Arrivals</button>
                                <button class="prod-tab" data-tab="bestseller">Best Seller</button>
                            </div>
                        </div>
                    </div>

                    <div id="tab-featured" class="tab-panel active">
                        <div class="product-scroll" id="featured-grid">
                            <div style="text-align:center;padding:3rem;grid-column:1/-1;color:#999;">Loading productsâ€¦
                            </div>
                        </div>
                    </div>
                    <div id="tab-new" class="tab-panel">
                        <div class="product-scroll" id="new-arrivals-grid">
                            <div style="text-align:center;padding:3rem;grid-column:1/-1;color:#999;">Loadingâ€¦</div>
                        </div>
                    </div>
                    <div id="tab-bestseller" class="tab-panel">
                        <div class="product-scroll" id="bestseller-grid">
                            <div style="text-align:center;padding:3rem;grid-column:1/-1;color:#999;">Loadingâ€¦</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 7. BENEFITS STRIP -->
            <div class="benefits-bar">
                <div class="benefit-pill"><span class="benefit-pill-icon">âœ¦</span> Flexible Price</div>
                <div class="benefit-pill"><span class="benefit-pill-icon">âœ¦</span> Authentic Craftsmanship</div>
                <div class="benefit-pill"><span class="benefit-pill-icon">âœ¦</span> FASHION SUPPORT</div>
                <div class="benefit-pill"><span class="benefit-pill-icon">âœ¦</span> 100% Secure</div>
            </div>

            <!-- 8. ALL SAREES with filters -->
            <section class="home-section" id="all-sarees">
                <div class="home-section-header">
                    <h2 class="home-section-title">All <em>Sarees</em></h2>
                </div>
                <div class="home-filters">
                    <div class="filter-tabs" id="category-tabs">
                        <button class="filter-tab active" data-category="all">All</button>
                    </div>
                    <div class="filter-price">
                        <input type="number" id="min-price" placeholder="Min â‚¹" min="0">
                        <span>â€“</span>
                        <input type="number" id="max-price" placeholder="Max â‚¹" min="0">
                        <button class="btn btn-primary" id="apply-filters"
                            style="padding:0.4rem 1rem; font-size:0.82rem; border-radius:var(--radius-full);">Filter</button>
                    </div>
                </div>
                <div class="product-scroll" id="saree-grid">
                    <div style="text-align:center;padding:3rem;grid-column:1/-1;color:#999;">Loading sareesâ€¦</div>
                </div>
                <div id="empty-state" style="display:none; text-align:center; padding:3rem; color:#999;">
                    <p style="font-size:1.1rem; margin-bottom:0.5rem;">No sarees found</p>
                    <p>Try adjusting your filters or check back later.</p>
                </div>
            </section>

            <!-- 9. WHATSAPP CONNECT -->
            <section class="newsletter-section">
                <p class="newsletter-eyebrow">âœ¦ Stay Connected</p>
                <h2 class="newsletter-title">Chat on <em>WhatsApp</em></h2>
                <p class="newsletter-sub">
                    Get early access to new arrivals, exclusive offers and weaver stories
                </p>

                <form class="newsletter-form" id="whatsapp-form">
                    <input type="text" id="userName" placeholder="Enter your name" required>
                    <button type="submit">Connect â†’</button>
                </form>

                <!-- Hidden WhatsApp Box (Redesigned) -->
                <div id="whatsappBox" class="whatsapp-result-box" style="display:none;">
                    <span class="whatsapp-number">
                        ðŸ“ž WhatsApp: <strong>+91 98765 43210</strong>
                    </span>

                    <a id="whatsappLink" href="#" target="_blank" class="whatsapp-chat-btn">
                        <span>ðŸ’¬ Chat on WhatsApp</span>
                    </a>
                </div>
            </section>

            <div id="footer-placeholder"></div>
        </main>
    </div>

    <script src="/js/api.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/components.js"></script>
    <script src="/js/notifications.js"></script>
    <script src="/js/search.js"></script>
    <script>
        // ============================================================
        //  Buyer Home â€” Inline page logic (replaces buyer-home.js)
        // ============================================================
        (async function () {
            const user = await auth.checkAuth(false);

            /* ---------- Hero CTA ---------- */
            const heroCta = document.getElementById('hero-cta');
            const heroSub = document.getElementById('hero-subtitle');
            if (user) {
                heroCta.innerHTML = `<a href="#all-sarees" class="btn btn-primary" style="border-radius:var(--radius-full);padding:0.75rem 2rem;">Continue Shopping</a>`;
                if (heroSub) heroSub.textContent = 'Welcome back! Discover exquisite handloom sarees.';
            }

            /* Local fallback images â€” use our renamed assets */
            const LOCAL_IMGS = [
                '/assets/images/sarees/saree_001.jpeg',
                '/assets/images/sarees/saree_002.jpg',
                '/assets/images/sarees/saree_003.jpg',
                '/assets/images/sarees/saree_004.jpg',
                '/assets/images/sarees/saree_005.jpg',
                '/assets/images/sarees/saree_006.jpg',
                '/assets/images/sarees/saree_007.jpg',
                '/assets/images/sarees/saree_008.jpg',
                '/assets/images/sarees/saree_009.jpg',
                '/assets/images/sarees/saree_010.jpg',
                '/assets/images/sarees/saree_012.jpg',
                '/assets/images/sarees/saree_013.jpg',
                '/assets/images/sarees/saree_014.jpg',
                '/assets/images/sarees/saree_015.jpeg',
                '/assets/images/sarees/saree_018.jpeg',
                '/assets/images/sarees/saree_021.jpeg',
                '/assets/images/sarees/saree_025.jpeg',
                '/assets/images/sarees/saree_027.jpeg',
                '/assets/images/sarees/saree_029.jpg',
            ];
            let imgIdx = 0;
            function nextImg() { return LOCAL_IMGS[imgIdx++ % LOCAL_IMGS.length]; }

            /* ---------- Offer marquee ---------- */
            async function loadOffers() {
                try {
                    const res = await api.get('/api/offers/active');
                    const offers = (res.data || []).slice(0, 5);
                    if (!offers.length) return;
                    const bar = document.getElementById('offer-marquee-bar');
                    const track = document.getElementById('marquee-track');
                    const sep = `<span class="marquee-sep" style="margin:0 2rem;"> âœ¦ </span>`;
                    const texts = offers.map(o => {
                        let t = `<span class="marquee-item">${o.title}`;
                        if (o.type === 'percentage') t += ` <strong>${o.value}% OFF</strong>`;
                        else if (o.type === 'fixed') t += ` <strong>â‚¹${o.value} OFF</strong>`;
                        else if (o.type === 'free_shipping') t += ` <strong>FREE SHIPPING</strong>`;
                        t += `</span>`;
                        return t;
                    }).join(sep);
                    track.innerHTML = texts + sep + texts + sep;
                    bar.classList.add('visible');

                    // Also update announcement bar
                    const ann = document.getElementById('announcement-bar');
                    if (ann && offers[0]) {
                        ann.textContent = offers[0].description || `${offers[0].title} â€” Limited Time Offer`;
                    }
                } catch (_) { }
            }

            /* ---------- Category showcase ---------- */
            const CATEGORY_IMGS = [
                '/assets/images/sarees/saree_001.jpeg',
                '/assets/images/sarees/saree_003.jpg',
                '/assets/images/sarees/saree_005.jpg',
                '/assets/images/sarees/saree_007.jpg',
                '/assets/images/sarees/saree_009.jpg',
                '/assets/images/sarees/saree_012.jpg',
                '/assets/images/sarees/saree_014.jpg',
                '/assets/images/sarees/saree_018.jpeg',
            ];
            async function loadCategories() {
                try {
                    const res = await api.get('/api/categories');
                    const cats = res.data || [];
                    const grid = document.getElementById('category-grid');
                    if (!grid || !cats.length) return;
                    grid.innerHTML = cats.map((c, i) => `
                    <div class="cat-card" onclick="filterByCategory(${c.id}, '${c.name}')" style="cursor: pointer;">
                        <div class="cat-icon-wrap">
                            <img src="${CATEGORY_IMGS[i % CATEGORY_IMGS.length]}" alt="${c.name}">
                        </div>
                        <span class="cat-name">${c.name}</span>
                        <span class="cat-count">${c.saree_count || 0} items</span>
                    </div>
                `).join('');
                } catch (e) { console.error('cats', e); }
            }

            /* ---------- Render product card ---------- */
            function renderCard(s, index) {
                const img = s.primary_image || LOCAL_IMGS[index % LOCAL_IMGS.length];
                const badge = s.is_new ? 'New' : (index === 0 ? 'Popular' : '');
                const addBtn = user
                    ? `<button class="btn btn-primary product-card-sm-btn" onclick="addToCart(${s.id},event)">Add Cart</button>`
                    : `<a href="/pages/login.html" class="btn btn-secondary product-card-sm-btn">Login</a>`;
                return `
                <div class="product-card-sm" onclick="window.location.href='/pages/saree-detail.html?id=${s.id}'">
                    ${badge ? `<span class="product-card-sm-badge">${badge}</span>` : ''}
                    <img class="product-card-sm-img" src="${img}" alt="${s.title}" onerror="this.src='${LOCAL_IMGS[0]}'">
                    <div class="product-card-sm-body">
                        <div class="product-card-sm-cat">${s.category_name || 'Saree'}</div>
                        <div class="product-card-sm-title">${s.title}</div>
                        <div class="product-card-sm-weaver">By ${s.weaver_name || 'Artisan Weaver'}</div>
                    </div>
                    <div class="product-card-sm-footer">
                        <span class="product-card-sm-price">â‚¹${Number(s.price).toLocaleString('en-IN')}</span>
                        ${addBtn}
                    </div>
                </div>
            `;
            }

            function renderGrid(sarees, containerId, start = 0) {
                const el = document.getElementById(containerId);
                if (!el) return;
                if (!sarees.length) {
                    el.innerHTML = `<div style="text-align:center;padding:3rem;grid-column:1/-1;color:#999;">No products found.</div>`;
                    return;
                }
                el.innerHTML = sarees.map((s, i) => renderCard(s, start + i)).join('');
            }

            /* ---------- Load featured / new arrivals ---------- */
            async function loadTabSarees() {
                try {
                    const res = await api.get('/api/sarees?limit=12');
                    const sarees = res.data || [];
                    renderGrid(sarees.slice(0, 8), 'featured-grid');
                    const sorted = [...sarees].sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
                    renderGrid(sorted.slice(0, 8), 'new-arrivals-grid', 8);
                    // bestseller: sort by price desc as proxy
                    const best = [...sarees].sort((a, b) => b.price - a.price);
                    renderGrid(best.slice(0, 8), 'bestseller-grid', 16);
                } catch (e) { console.error('featured', e); }
            }

            /* ---------- Category filter tabs ---------- */
            let currentCategory = null, minPrice = null, maxPrice = null;

            async function loadFilterTabs() {
                try {
                    const res = await api.get('/api/categories');
                    const cats = res.data || [];
                    const tabs = document.getElementById('category-tabs');
                    tabs.innerHTML = `<button class="filter-tab active" data-category="all">All</button>` +
                        cats.map(c => `<button class="filter-tab" data-category="${c.id}">${c.name}</button>`).join('');
                    tabs.querySelectorAll('.filter-tab').forEach(btn => {
                        btn.addEventListener('click', () => {
                            tabs.querySelectorAll('.filter-tab').forEach(b => b.classList.remove('active'));
                            btn.classList.add('active');
                            const cat = btn.dataset.category;
                            currentCategory = cat === 'all' ? null : parseInt(cat);
                            // check for url param
                            const urlParams = new URLSearchParams(window.location.search);
                            const catParam = urlParams.get('category');
                            if (catParam && parseInt(catParam) === currentCategory) {
                                // already selected via url
                            }
                            loadSarees();
                        });
                    });
                    // If URL has ?category=X, auto-select it
                    const urlParams = new URLSearchParams(window.location.search);
                    const catParam = urlParams.get('category');
                    if (catParam) {
                        currentCategory = parseInt(catParam);
                        const target = tabs.querySelector(`[data-category="${catParam}"]`);
                        if (target) {
                            tabs.querySelectorAll('.filter-tab').forEach(b => b.classList.remove('active'));
                            target.classList.add('active');
                        }
                    }
                } catch (e) { console.error('filter tabs', e); }
            }

            /* ---------- Filter by category (Helper) ---------- */
            window.filterByCategory = function (id, name) {
                currentCategory = id;
                // Update URL without reload
                const url = new URL(window.location);
                if (id) url.searchParams.set('category', id);
                else url.searchParams.delete('category');
                window.history.pushState({}, '', url);

                // Update tab UI
                const tabs = document.getElementById('category-tabs');
                if (tabs) {
                    tabs.querySelectorAll('.filter-tab').forEach(b => {
                        b.classList.remove('active');
                        if (b.dataset.category == id || (id == null && b.dataset.category == 'all')) {
                            b.classList.add('active');
                        }
                    });
                }

                // Scroll to section and load
                document.getElementById('all-sarees').scrollIntoView({ behavior: 'smooth' });
                loadSarees();
            };

            /* ---------- Load all sarees ---------- */
            async function loadSarees() {
                const grid = document.getElementById('saree-grid');
                const empty = document.getElementById('empty-state');
                grid.innerHTML = `<div style="text-align:center;padding:3rem;grid-column:1/-1;color:#999;">Loadingâ€¦</div>`;
                grid.style.display = 'grid';
                empty.style.display = 'none';

                try {
                    const params = new URLSearchParams();
                    if (currentCategory) params.append('category', currentCategory);
                    if (minPrice) params.append('minPrice', minPrice);
                    if (maxPrice) params.append('maxPrice', maxPrice);

                    const urlParams = new URLSearchParams(window.location.search);
                    const searchQuery = urlParams.get('q');
                    if (searchQuery) params.append('q', searchQuery);

                    const url = searchQuery ? `/api/sarees/search?${params}` : `/api/sarees?${params}`;
                    const res = await api.get(url);
                    const list = res.data || [];

                    if (!list.length) {
                        grid.style.display = 'none';
                        empty.style.display = 'block';
                        return;
                    }
                    renderGrid(list, 'saree-grid');
                } catch (e) {
                    grid.innerHTML = `<div style="text-align:center;padding:3rem;grid-column:1/-1;color:red;">Error loading sarees. Please try again.</div>`;
                }
            }

            /* ---------- Add to cart ---------- */
            window.addToCart = async function (sareeId, evt) {
                if (evt) evt.stopPropagation();
                if (!user) { window.location.href = '/pages/login.html'; return; }
                try {
                    await api.post('/api/cart/add', { sareeId, quantity: 1 });
                    notifications.showToast('success', 'Added!', 'Item added to cart');
                } catch (e) {
                    notifications.showToast('error', 'Error', e.message || 'Failed');
                }
            };

            /* ---------- Tabs ---------- */
            document.getElementById('product-tab-btns').addEventListener('click', e => {
                const btn = e.target.closest('.prod-tab');
                if (!btn) return;
                document.querySelectorAll('.prod-tab').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
                const panel = document.getElementById(`tab-${btn.dataset.tab}`);
                if (panel) panel.classList.add('active');
            });

            /* ---------- Price filter ---------- */
            document.getElementById('apply-filters').addEventListener('click', () => {
                minPrice = document.getElementById('min-price').value || null;
                maxPrice = document.getElementById('max-price').value || null;
                loadSarees();
            });

            /* ---------- Newsletter ---------- */
            document.getElementById("whatsapp-form").addEventListener("submit", function (e) {
                e.preventDefault();

                var name = document.getElementById("userName").value;
                var phoneNumber = "919876543210"; // Change to your number (without +)

                var message = "Hi, my name is " + name + ". I want to know more about your products.";
                var whatsappURL = "https://wa.me/" + phoneNumber + "?text=" + encodeURIComponent(message);

                document.getElementById("whatsappLink").href = whatsappURL;
                document.getElementById("whatsappBox").style.display = "block";

                // Show success toast
                if (typeof notifications !== 'undefined') {
                    notifications.showToast('success', 'Connected!', 'Hi ' + name + ', our team will reach out to you soon!');
                }
            });

            /* ---------- Kick off all loads ---------- */
            await loadOffers();
            await loadCategories();
            loadTabSarees();
            await loadFilterTabs();
            await loadSarees();
        })();


    </script>
</body>

</html>