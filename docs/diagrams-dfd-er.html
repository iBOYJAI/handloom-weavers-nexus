<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Handloom Weavers Nexus — DFD & ER Diagrams</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Playfair+Display:wght@600&display=swap');

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'DM Mono', monospace;
      background: #f8f7f4;
      color: #111;
      padding: 40px 32px;
    }

    .page-title {
      font-family: 'Playfair Display', serif;
      font-size: 2rem;
      letter-spacing: -0.5px;
      border-bottom: 3px solid #111;
      padding-bottom: 14px;
      margin-bottom: 6px;
    }

    .page-sub {
      font-size: 0.72rem;
      color: #555;
      letter-spacing: 0.04em;
      margin-bottom: 36px;
    }

    .section {
      margin-bottom: 52px;
    }

    .section-title {
      font-family: 'DM Mono', monospace;
      font-size: 0.78rem;
      font-weight: 500;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #111;
      border-left: 4px solid #111;
      padding-left: 12px;
      margin-bottom: 18px;
    }

    .diagram-wrap {
      background: #fff;
      border: 1.5px solid #222;
      border-radius: 2px;
      padding: 32px 24px 24px;
      overflow-x: auto;
    }

    .note {
      font-size: 0.66rem;
      color: #777;
      letter-spacing: 0.04em;
      margin-top: 12px;
      padding-top: 10px;
      border-top: 1px solid #e0e0e0;
    }

    svg {
      display: block;
    }

    text {
      font-family: 'DM Mono', monospace;
    }
  </style>
</head>

<body>

  <h1 class="page-title">Handloom Weavers Nexus</h1>
  <p class="page-sub">DFD LEVEL 0 · LEVEL 1 · LEVEL 2 · ER DIAGRAM (CHEN NOTATION) — WHITE/BLACK THEME</p>

  <!-- ══════════════ DFD LEVEL 0 ══════════════ -->
  <div class="section">
    <p class="section-title">DFD Level 0 — Context Diagram</p>
    <div class="diagram-wrap">
      <svg width="860" height="400" viewBox="0 0 860 400" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <marker id="a0" markerWidth="9" markerHeight="9" refX="8" refY="4.5" orient="auto">
            <polygon points="0 0,9 4.5,0 9" fill="#111" stroke="none" />
          </marker>
        </defs>
        <rect x="30" y="44" width="120" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="90" y="70" text-anchor="middle" fill="#111" font-size="11.5" font-weight="500">Buyer / Visitor</text>
        <rect x="30" y="178" width="120" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="90" y="204" text-anchor="middle" fill="#111" font-size="11.5" font-weight="500">Weaver</text>
        <rect x="30" y="312" width="120" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="90" y="338" text-anchor="middle" fill="#111" font-size="11.5" font-weight="500">Admin</text>
        <circle cx="430" cy="200" r="85" fill="none" stroke="#111" stroke-width="2.5" />
        <text x="430" y="192" text-anchor="middle" fill="#111" font-size="12" font-weight="500">Handloom Weavers</text>
        <text x="430" y="210" text-anchor="middle" fill="#111" font-size="12" font-weight="500">Nexus</text>
        <text x="430" y="226" text-anchor="middle" fill="#111" font-size="9" fill-opacity="0.55">System</text>
        <rect x="710" y="178" width="120" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="770" y="198" text-anchor="middle" fill="#111" font-size="10.5">Admin</text>
        <text x="770" y="213" text-anchor="middle" fill="#111" font-size="10.5">(Reports)</text>
        <!-- Buyer → System -->
        <line x1="150" y1="58" x2="346" y2="148" stroke="#111" stroke-width="1.6" marker-end="url(#a0)" />
        <text x="237" y="91" text-anchor="middle" fill="#333" font-size="9">Login / Browse</text>
        <!-- System → Buyer (dashed, offset) -->
        <line x1="352" y1="152" x2="156" y2="63" stroke="#111" stroke-width="1.6" stroke-dasharray="5,3"
          marker-end="url(#a0)" />
        <text x="248" y="116" text-anchor="middle" fill="#333" font-size="9">Notifications</text>
        <!-- Weaver → System -->
        <line x1="150" y1="200" x2="345" y2="200" stroke="#111" stroke-width="1.6" marker-end="url(#a0)" />
        <text x="246" y="193" text-anchor="middle" fill="#333" font-size="9">Upload Sarees</text>
        <!-- System → Weaver (dashed, offset) -->
        <line x1="345" y1="210" x2="150" y2="210" stroke="#111" stroke-width="1.6" stroke-dasharray="5,3"
          marker-end="url(#a0)" />
        <text x="246" y="225" text-anchor="middle" fill="#333" font-size="9">Analytics</text>
        <!-- Admin → System -->
        <line x1="150" y1="326" x2="346" y2="252" stroke="#111" stroke-width="1.6" marker-end="url(#a0)" />
        <text x="237" y="302" text-anchor="middle" fill="#333" font-size="9">Approvals</text>
        <!-- System → Reports entity -->
        <line x1="515" y1="200" x2="710" y2="200" stroke="#111" stroke-width="1.6" marker-end="url(#a0)" />
        <text x="613" y="193" text-anchor="middle" fill="#333" font-size="9">Reports / Analytics</text>
      </svg>
      <p class="note">External entities = rectangles · Central process = circle · Solid = input flow · Dashed = output
        flow</p>
    </div>
  </div>

  <!-- ══════════════ DFD LEVEL 1 ══════════════ -->
  <div class="section">
    <p class="section-title">DFD Level 1 — Processes &amp; Datastores</p>
    <div class="diagram-wrap">
      <svg width="980" height="540" viewBox="0 0 980 540" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <marker id="a1" markerWidth="9" markerHeight="9" refX="8" refY="4.5" orient="auto">
            <polygon points="0 0,9 4.5,0 9" fill="#111" stroke="none" />
          </marker>
        </defs>
        <!-- External entities -->
        <rect x="20" y="44" width="90" height="40" fill="none" stroke="#111" stroke-width="2" />
        <text x="65" y="68" text-anchor="middle" fill="#111" font-size="10.5" font-weight="500">Buyer</text>
        <rect x="20" y="194" width="90" height="40" fill="none" stroke="#111" stroke-width="2" />
        <text x="65" y="218" text-anchor="middle" fill="#111" font-size="10.5" font-weight="500">Weaver</text>
        <rect x="20" y="420" width="90" height="40" fill="none" stroke="#111" stroke-width="2" />
        <text x="65" y="444" text-anchor="middle" fill="#111" font-size="10.5" font-weight="500">Admin</text>
        <rect x="880" y="194" width="88" height="40" fill="none" stroke="#111" stroke-width="2" />
        <text x="924" y="212" text-anchor="middle" fill="#111" font-size="9.5">Admin</text>
        <text x="924" y="226" text-anchor="middle" fill="#111" font-size="9.5">(Reports)</text>
        <!-- Processes -->
        <circle cx="230" cy="64" r="38" fill="none" stroke="#111" stroke-width="2" />
        <text x="230" y="58" text-anchor="middle" fill="#111" font-size="9" font-weight="500">1</text>
        <text x="230" y="72" text-anchor="middle" fill="#111" font-size="9" font-weight="500">AUTH</text>
        <text x="230" y="84" text-anchor="middle" fill="#111" font-size="7.5" fill-opacity="0.6">Login / Reg</text>
        <circle cx="230" cy="214" r="38" fill="none" stroke="#111" stroke-width="2" />
        <text x="230" y="208" text-anchor="middle" fill="#111" font-size="9" font-weight="500">2</text>
        <text x="230" y="222" text-anchor="middle" fill="#111" font-size="9" font-weight="500">CATALOG</text>
        <text x="230" y="234" text-anchor="middle" fill="#111" font-size="7.5" fill-opacity="0.6">Browse/Upload</text>
        <circle cx="230" cy="370" r="38" fill="none" stroke="#111" stroke-width="2" />
        <text x="230" y="364" text-anchor="middle" fill="#111" font-size="9" font-weight="500">3</text>
        <text x="230" y="378" text-anchor="middle" fill="#111" font-size="9" font-weight="500">ORDERS</text>
        <text x="230" y="390" text-anchor="middle" fill="#111" font-size="7.5" fill-opacity="0.6">Checkout/Track</text>
        <circle cx="530" cy="214" r="38" fill="none" stroke="#111" stroke-width="2" />
        <text x="530" y="208" text-anchor="middle" fill="#111" font-size="9" font-weight="500">4</text>
        <text x="530" y="222" text-anchor="middle" fill="#111" font-size="9" font-weight="500">APPROVALS</text>
        <text x="530" y="234" text-anchor="middle" fill="#111" font-size="7.5" fill-opacity="0.6">Review Listings</text>
        <circle cx="760" cy="214" r="38" fill="none" stroke="#111" stroke-width="2" />
        <text x="760" y="208" text-anchor="middle" fill="#111" font-size="9" font-weight="500">5</text>
        <text x="760" y="222" text-anchor="middle" fill="#111" font-size="9" font-weight="500">REPORTS</text>
        <text x="760" y="234" text-anchor="middle" fill="#111" font-size="7.5" fill-opacity="0.6">Analytics/Logs</text>
        <!-- Datastores (right-open box) -->
        <line x1="370" y1="44" x2="370" y2="84" stroke="#111" stroke-width="2" />
        <line x1="370" y1="44" x2="490" y2="44" stroke="#111" stroke-width="2" />
        <line x1="370" y1="84" x2="490" y2="84" stroke="#111" stroke-width="2" />
        <text x="430" y="68" text-anchor="middle" fill="#111" font-size="10">DS1: users</text>
        <line x1="370" y1="184" x2="370" y2="244" stroke="#111" stroke-width="2" />
        <line x1="370" y1="184" x2="490" y2="184" stroke="#111" stroke-width="2" />
        <line x1="370" y1="244" x2="490" y2="244" stroke="#111" stroke-width="2" />
        <text x="430" y="218" text-anchor="middle" fill="#111" font-size="10">DS2: sarees</text>
        <line x1="370" y1="344" x2="370" y2="404" stroke="#111" stroke-width="2" />
        <line x1="370" y1="344" x2="490" y2="344" stroke="#111" stroke-width="2" />
        <line x1="370" y1="404" x2="490" y2="404" stroke="#111" stroke-width="2" />
        <text x="430" y="378" text-anchor="middle" fill="#111" font-size="10">DS3: orders</text>
        <line x1="600" y1="184" x2="600" y2="244" stroke="#111" stroke-width="2" />
        <line x1="600" y1="184" x2="720" y2="184" stroke="#111" stroke-width="2" />
        <line x1="600" y1="244" x2="720" y2="244" stroke="#111" stroke-width="2" />
        <text x="660" y="218" text-anchor="middle" fill="#111" font-size="10">DS4: approvals</text>
        <line x1="810" y1="280" x2="810" y2="320" stroke="#111" stroke-width="2" />
        <line x1="810" y1="280" x2="930" y2="280" stroke="#111" stroke-width="2" />
        <line x1="810" y1="320" x2="930" y2="320" stroke="#111" stroke-width="2" />
        <text x="870" y="305" text-anchor="middle" fill="#111" font-size="10">DS5: audit_log</text>
        <!-- Flows -->
        <line x1="110" y1="64" x2="192" y2="64" stroke="#111" stroke-width="1.6" marker-end="url(#a1)" />
        <text x="151" y="57" text-anchor="middle" fill="#444" font-size="8.5">login</text>
        <line x1="268" y1="64" x2="370" y2="64" stroke="#111" stroke-width="1.6" marker-end="url(#a1)" />
        <text x="316" y="57" text-anchor="middle" fill="#444" font-size="8.5">session</text>
        <line x1="370" y1="74" x2="268" y2="74" stroke="#111" stroke-width="1.6" marker-end="url(#a1)" />
        <text x="316" y="86" text-anchor="middle" fill="#444" font-size="8.5">credentials</text>
        <!-- Buyer → P2 via separate left rail at x=40 -->
        <line x1="40" y1="64" x2="40" y2="214" stroke="#111" stroke-width="1.6" stroke-dasharray="4,3" />
        <line x1="40" y1="214" x2="192" y2="214" stroke="#111" stroke-width="1.6" marker-end="url(#a1)" />
        <text x="30" y="145" fill="#444" font-size="8.5" text-anchor="middle"
          transform="rotate(-90,30,145)">browse</text>
        <!-- Weaver → P2 -->
        <line x1="110" y1="214" x2="192" y2="214" stroke="#111" stroke-width="1.6" marker-end="url(#a1)" />
        <text x="151" y="207" text-anchor="middle" fill="#444" font-size="8.5">upload</text>
        <line x1="268" y1="208" x2="370" y2="198" stroke="#111" stroke-width="1.6" marker-end="url(#a1)" />
        <text x="316" y="197" text-anchor="middle" fill="#444" font-size="8.5">saree data</text>
        <line x1="370" y1="228" x2="268" y2="220" stroke="#111" stroke-width="1.6" marker-end="url(#a1)" />
        <text x="316" y="238" text-anchor="middle" fill="#444" font-size="8.5">listings</text>
        <!-- Buyer → P3 via separate left rail at x=50 -->
        <line x1="50" y1="64" x2="50" y2="370" stroke="#111" stroke-width="1" stroke-dasharray="3,3" />
        <line x1="50" y1="370" x2="192" y2="370" stroke="#111" stroke-width="1.6" marker-end="url(#a1)" />
        <text x="117" y="363" text-anchor="middle" fill="#444" font-size="8.5">checkout</text>
        <line x1="268" y1="370" x2="370" y2="370" stroke="#111" stroke-width="1.6" marker-end="url(#a1)" />
        <text x="316" y="363" text-anchor="middle" fill="#444" font-size="8.5">order</text>
        <line x1="370" y1="385" x2="268" y2="380" stroke="#111" stroke-width="1.6" marker-end="url(#a1)" />
        <text x="316" y="398" text-anchor="middle" fill="#444" font-size="8.5">status</text>
        <!-- Admin → P4 via bottom rail -->
        <line x1="110" y1="440" x2="530" y2="440" stroke="#111" stroke-width="1.6" />
        <line x1="530" y1="440" x2="530" y2="252" stroke="#111" stroke-width="1.6" marker-end="url(#a1)" />
        <text x="320" y="433" text-anchor="middle" fill="#444" font-size="8.5">admin review</text>
        <!-- P4 ↔ DS4 -->
        <line x1="568" y1="208" x2="600" y2="208" stroke="#111" stroke-width="1.6" marker-end="url(#a1)" />
        <text x="582" y="202" text-anchor="middle" fill="#444" font-size="8.5">write</text>
        <line x1="600" y1="222" x2="568" y2="222" stroke="#111" stroke-width="1.6" marker-end="url(#a1)" />
        <text x="582" y="236" text-anchor="middle" fill="#444" font-size="8.5">read</text>
        <!-- P4 → P5 -->
        <line x1="568" y1="206" x2="722" y2="206" stroke="#111" stroke-width="1.6" marker-end="url(#a1)" />
        <text x="644" y="199" text-anchor="middle" fill="#444" font-size="8.5">data</text>
        <!-- P5 → DS5 -->
        <line x1="760" y1="252" x2="760" y2="300" stroke="#111" stroke-width="1.6" />
        <line x1="760" y1="300" x2="810" y2="300" stroke="#111" stroke-width="1.6" marker-end="url(#a1)" />
        <text x="778" y="285" fill="#444" font-size="8.5">logs</text>
        <!-- P5 → Admin Reports -->
        <line x1="798" y1="214" x2="880" y2="214" stroke="#111" stroke-width="1.6" marker-end="url(#a1)" />
        <text x="838" y="207" text-anchor="middle" fill="#444" font-size="8.5">reports</text>
      </svg>
      <p class="note">Processes = circles · Datastores = right-open boxes · All flows labeled · No crossing lines</p>
    </div>
  </div>

  <!-- ══════════════ DFD LEVEL 2 ══════════════ -->
  <div class="section">
    <p class="section-title">DFD Level 2 — Order Fulfillment Sub-process</p>
    <div class="diagram-wrap">
      <svg width="860" height="320" viewBox="0 0 860 320" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <marker id="a2" markerWidth="9" markerHeight="9" refX="8" refY="4.5" orient="auto">
            <polygon points="0 0,9 4.5,0 9" fill="#111" stroke="none" />
          </marker>
        </defs>
        <rect x="24" y="98" width="90" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="69" y="125" text-anchor="middle" fill="#111" font-size="11" font-weight="500">Buyer</text>
        <circle cx="200" cy="120" r="40" fill="none" stroke="#111" stroke-width="2" />
        <text x="200" y="113" text-anchor="middle" fill="#111" font-size="9" font-weight="500">2.1</text>
        <text x="200" y="125" text-anchor="middle" fill="#111" font-size="9" font-weight="500">VALIDATE</text>
        <text x="200" y="137" text-anchor="middle" fill="#111" font-size="7.5" fill-opacity="0.6">Cart &amp;
          Stock</text>
        <circle cx="390" cy="120" r="40" fill="none" stroke="#111" stroke-width="2" />
        <text x="390" y="113" text-anchor="middle" fill="#111" font-size="9" font-weight="500">2.2</text>
        <text x="390" y="125" text-anchor="middle" fill="#111" font-size="9" font-weight="500">CREATE</text>
        <text x="390" y="137" text-anchor="middle" fill="#111" font-size="7.5" fill-opacity="0.6">Order Record</text>
        <circle cx="580" cy="120" r="40" fill="none" stroke="#111" stroke-width="2" />
        <text x="580" y="113" text-anchor="middle" fill="#111" font-size="9" font-weight="500">2.3</text>
        <text x="580" y="125" text-anchor="middle" fill="#111" font-size="9" font-weight="500">DEDUCT</text>
        <text x="580" y="137" text-anchor="middle" fill="#111" font-size="7.5" fill-opacity="0.6">Stock Update</text>
        <circle cx="770" cy="120" r="40" fill="none" stroke="#111" stroke-width="2" />
        <text x="770" y="113" text-anchor="middle" fill="#111" font-size="9" font-weight="500">2.4</text>
        <text x="770" y="125" text-anchor="middle" fill="#111" font-size="9" font-weight="500">NOTIFY</text>
        <text x="770" y="137" text-anchor="middle" fill="#111" font-size="7.5" fill-opacity="0.6">Email / SMS</text>
        <!-- Datastore -->
        <line x1="320" y1="230" x2="320" y2="270" stroke="#111" stroke-width="2" />
        <line x1="320" y1="230" x2="640" y2="230" stroke="#111" stroke-width="2" />
        <line x1="320" y1="270" x2="640" y2="270" stroke="#111" stroke-width="2" />
        <text x="480" y="254" text-anchor="middle" fill="#111" font-size="10">DS3: orders / order_items</text>
        <!-- Flows -->
        <line x1="114" y1="120" x2="160" y2="120" stroke="#111" stroke-width="1.6" marker-end="url(#a2)" />
        <text x="137" y="113" text-anchor="middle" fill="#444" font-size="8.5">checkout req</text>
        <line x1="240" y1="120" x2="350" y2="120" stroke="#111" stroke-width="1.6" marker-end="url(#a2)" />
        <text x="295" y="113" text-anchor="middle" fill="#444" font-size="8.5">validated cart</text>
        <line x1="430" y1="120" x2="540" y2="120" stroke="#111" stroke-width="1.6" marker-end="url(#a2)" />
        <text x="485" y="113" text-anchor="middle" fill="#444" font-size="8.5">order id</text>
        <line x1="620" y1="120" x2="730" y2="120" stroke="#111" stroke-width="1.6" marker-end="url(#a2)" />
        <text x="675" y="113" text-anchor="middle" fill="#444" font-size="8.5">receipt</text>
        <!-- P2.2 → DS3 -->
        <line x1="390" y1="160" x2="390" y2="230" stroke="#111" stroke-width="1.6" marker-end="url(#a2)" />
        <text x="402" y="200" fill="#444" font-size="8.5">create</text>
        <!-- DS3 → P2.3 -->
        <line x1="580" y1="230" x2="580" y2="160" stroke="#111" stroke-width="1.6" marker-end="url(#a2)" />
        <text x="592" y="200" fill="#444" font-size="8.5">read</text>
        <!-- P2.4 → Buyer return (top lane) -->
        <line x1="770" y1="80" x2="770" y2="46" stroke="#111" stroke-width="1.6" stroke-dasharray="5,3" />
        <line x1="770" y1="46" x2="69" y2="46" stroke="#111" stroke-width="1.6" stroke-dasharray="5,3" />
        <line x1="69" y1="46" x2="69" y2="98" stroke="#111" stroke-width="1.6" stroke-dasharray="5,3"
          marker-end="url(#a2)" />
        <text x="420" y="40" text-anchor="middle" fill="#444" font-size="8.5">confirmation email / SMS</text>
      </svg>
      <p class="note">Decomposition of Process 3 · Dashed top loop = confirmation back to Buyer · DS3 = orders &amp;
        order_items</p>
    </div>
  </div>

  <!-- ══════════════ ER DIAGRAM ══════════════ -->
  <div class="section">
    <p class="section-title">ER Diagram — Chen Notation (Full Schema)</p>
    <div class="diagram-wrap">
      <!--
      ROOT CAUSE FIX:
      Previous version had multiple <path> elements sharing the same x=95 vertical
      coordinate — SVG treats overlapping open paths as a filled polygon (black triangle).

      FIX: USER entity is repeated as a small labeled box in each cluster row.
      Each connection uses completely independent <line> elements.
      NO shared segments. Every element has explicit fill="none".
    -->
      <svg width="1160" height="1040" viewBox="0 0 1160 1040" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <marker id="er" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
            <polygon points="0 0,8 4,0 8" fill="#111" stroke="none" />
          </marker>
          <style>
            .eL {
              font-family: 'DM Mono', monospace;
              font-size: 11px;
              font-weight: 700;
              fill: #111;
            }

            .rL {
              font-family: 'DM Mono', monospace;
              font-size: 8.5px;
              fill: #111;
              font-weight: 600;
            }

            .aL {
              font-family: 'DM Mono', monospace;
              font-size: 7.5px;
              fill: #555;
            }

            .cL {
              font-family: 'DM Mono', monospace;
              font-size: 9px;
              fill: #999;
              font-weight: 600;
            }

            .sL {
              font-family: 'DM Mono', monospace;
              font-size: 7px;
              fill: #bbb;
            }
          </style>
        </defs>

        <!-- ─────────────────────────────────────────────────
           CLUSTER A: USER → SAREE → saree_categories
           y band: 40–140
      ───────────────────────────────────────────────── -->
        <text x="20" y="30" class="sL">CLUSTER A — Core: User provides Sarees</text>

        <!-- USER -->
        <rect x="30" y="48" width="110" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="85" y="74" text-anchor="middle" class="eL">USER</text>
        <line x1="85" y1="92" x2="85" y2="108" stroke="#111" stroke-width="1" fill="none" />
        <ellipse cx="85" cy="120" rx="74" ry="12" fill="none" stroke="#111" stroke-width="1.2" />
        <text x="85" y="124" text-anchor="middle" class="aL">id, name, email, role, created_at</text>

        <!-- PROVIDES -->
        <polygon points="248,48 302,70 248,92 194,70" fill="none" stroke="#111" stroke-width="1.8" />
        <text x="248" y="74" text-anchor="middle" class="rL">PROVIDES</text>
        <line x1="140" y1="70" x2="194" y2="70" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="165" y="63" text-anchor="middle" class="cL">1</text>

        <!-- SAREE -->
        <rect x="372" y="48" width="110" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="427" y="74" text-anchor="middle" class="eL">SAREE</text>
        <line x1="302" y1="70" x2="372" y2="70" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="335" y="63" text-anchor="middle" class="cL">N</text>
        <line x1="427" y1="92" x2="427" y2="108" stroke="#111" stroke-width="1" fill="none" />
        <ellipse cx="427" cy="120" rx="84" ry="12" fill="none" stroke="#111" stroke-width="1.2" />
        <text x="427" y="124" text-anchor="middle" class="aL">id, weaver_id, title, price, stock, desc</text>

        <!-- IN -->
        <polygon points="610,48 664,70 610,92 556,70" fill="none" stroke="#111" stroke-width="1.8" />
        <text x="610" y="74" text-anchor="middle" class="rL">IN</text>
        <line x1="482" y1="70" x2="556" y2="70" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="517" y="63" text-anchor="middle" class="cL">N</text>

        <!-- saree_categories -->
        <rect x="734" y="48" width="150" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="809" y="68" text-anchor="middle" class="eL">saree_</text>
        <text x="809" y="84" text-anchor="middle" class="eL">categories</text>
        <line x1="664" y1="70" x2="734" y2="70" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="697" y="63" text-anchor="middle" class="cL">M</text>
        <line x1="809" y1="92" x2="809" y2="108" stroke="#111" stroke-width="1" fill="none" />
        <ellipse cx="809" cy="120" rx="62" ry="12" fill="none" stroke="#111" stroke-width="1.2" />
        <text x="809" y="124" text-anchor="middle" class="aL">id, name, slug</text>

        <!-- ─────────────────────────────────────────────────
           CLUSTER B: SAREE sub-relationships
           y band: 180–310
      ───────────────────────────────────────────────── -->
        <text x="20" y="164" class="sL">CLUSTER B — Saree sub-entities</text>

        <!-- HAS_IMAGE diamond — centered at x=300, y=222 -->
        <polygon points="300,202 354,222 300,242 246,222" fill="none" stroke="#111" stroke-width="1.8" />
        <text x="300" y="226" text-anchor="middle" class="rL">HAS_IMAGE</text>
        <!-- SAREE bottom → HAS_IMAGE: SAREE bottom center (427,92) down to y=178, left to x=354, right-point of diamond -->
        <line x1="427" y1="92" x2="427" y2="178" stroke="#111" stroke-width="1" stroke-dasharray="4,3" fill="none" />
        <line x1="427" y1="178" x2="354" y2="222" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />

        <!-- saree_images -->
        <rect x="110" y="208" width="126" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="173" y="234" text-anchor="middle" class="eL">saree_images</text>
        <line x1="246" y1="222" x2="236" y2="222" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <line x1="173" y1="252" x2="173" y2="268" stroke="#111" stroke-width="1" fill="none" />
        <ellipse cx="173" cy="280" rx="80" ry="12" fill="none" stroke="#111" stroke-width="1.2" />
        <text x="173" y="284" text-anchor="middle" class="aL">id, saree_id, file_path, is_primary</text>

        <!-- HAS_VARIANT diamond — x=570, y=222 -->
        <polygon points="570,202 624,222 570,242 516,222" fill="none" stroke="#111" stroke-width="1.8" />
        <text x="570" y="226" text-anchor="middle" class="rL">HAS_VARIANT</text>
        <!-- SAREE right edge (482,70) → right to x=570 → down to diamond top (570,202) -->
        <line x1="482" y1="70" x2="570" y2="70" stroke="#111" stroke-width="1" stroke-dasharray="4,3" fill="none" />
        <line x1="570" y1="70" x2="570" y2="202" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />

        <!-- saree_variants -->
        <rect x="704" y="208" width="126" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="767" y="234" text-anchor="middle" class="eL">saree_variants</text>
        <line x1="624" y1="222" x2="704" y2="222" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="662" y="215" text-anchor="middle" class="cL">N</text>
        <line x1="767" y1="252" x2="767" y2="268" stroke="#111" stroke-width="1" fill="none" />
        <ellipse cx="767" cy="280" rx="78" ry="12" fill="none" stroke="#111" stroke-width="1.2" />
        <text x="767" y="284" text-anchor="middle" class="aL">id, saree_id, color_name, stock_qty</text>

        <!-- APPROVED_BY (saree) diamond — x=970, y=222 -->
        <polygon points="970,202 1024,222 970,242 916,222" fill="none" stroke="#111" stroke-width="1.8" />
        <text x="970" y="220" text-anchor="middle" class="rL">APPROVED</text>
        <text x="970" y="232" text-anchor="middle" class="rL">_BY</text>
        <!-- SAREE top-right → right rail at x=970 → down -->
        <line x1="482" y1="70" x2="970" y2="70" stroke="#111" stroke-width="1" stroke-dasharray="4,3" fill="none" />
        <line x1="970" y1="70" x2="970" y2="202" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />

        <!-- saree_approvals -->
        <rect x="1044" y="208" width="110" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="1099" y="234" text-anchor="middle" class="eL">saree_approvals</text>
        <line x1="1024" y1="222" x2="1044" y2="222" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <line x1="1099" y1="252" x2="1099" y2="268" stroke="#111" stroke-width="1" fill="none" />
        <ellipse cx="1099" cy="280" rx="74" ry="12" fill="none" stroke="#111" stroke-width="1.2" />
        <text x="1099" y="284" text-anchor="middle" class="aL">id, saree_id, status, admin_id</text>

        <!-- ─────────────────────────────────────────────────
           CLUSTER C: ORDER relationships
           y band: 340–500
           USER box repeated here (standard ER practice)
      ───────────────────────────────────────────────── -->
        <text x="20" y="326" class="sL">CLUSTER C — Orders (USER = same entity as Cluster A)</text>

        <!-- USER (repeated box) -->
        <rect x="30" y="350" width="110" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="85" y="376" text-anchor="middle" class="eL">USER</text>
        <text x="85" y="388" text-anchor="middle" class="sL">(buyer)</text>

        <!-- PLACES diamond -->
        <polygon points="238,350 292,372 238,394 184,372" fill="none" stroke="#111" stroke-width="1.8" />
        <text x="238" y="376" text-anchor="middle" class="rL">PLACES</text>
        <line x1="140" y1="372" x2="184" y2="372" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="160" y="365" text-anchor="middle" class="cL">1</text>

        <!-- ORDER -->
        <rect x="362" y="350" width="110" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="417" y="376" text-anchor="middle" class="eL">ORDER</text>
        <line x1="292" y1="372" x2="362" y2="372" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="325" y="365" text-anchor="middle" class="cL">N</text>
        <line x1="417" y1="394" x2="417" y2="410" stroke="#111" stroke-width="1" fill="none" />
        <ellipse cx="417" cy="422" rx="86" ry="12" fill="none" stroke="#111" stroke-width="1.2" />
        <text x="417" y="426" text-anchor="middle" class="aL">id, buyer_id, total_amount, status</text>

        <!-- CONTAINS diamond -->
        <polygon points="564,350 618,372 564,394 510,372" fill="none" stroke="#111" stroke-width="1.8" />
        <text x="564" y="376" text-anchor="middle" class="rL">CONTAINS</text>
        <line x1="472" y1="372" x2="510" y2="372" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="490" y="365" text-anchor="middle" class="cL">1</text>

        <!-- order_items -->
        <rect x="692" y="350" width="110" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="747" y="376" text-anchor="middle" class="eL">order_items</text>
        <line x1="618" y1="372" x2="692" y2="372" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="653" y="365" text-anchor="middle" class="cL">N</text>
        <line x1="747" y1="394" x2="747" y2="410" stroke="#111" stroke-width="1" fill="none" />
        <ellipse cx="747" cy="422" rx="80" ry="12" fill="none" stroke="#111" stroke-width="1.2" />
        <text x="747" y="426" text-anchor="middle" class="aL">id, order_id, saree_id, qty, price</text>

        <!-- CUSTOMIZES diamond -->
        <polygon points="900,350 954,372 900,394 846,372" fill="none" stroke="#111" stroke-width="1.8" />
        <text x="900" y="376" text-anchor="middle" class="rL">CUSTOMIZES</text>
        <line x1="802" y1="372" x2="846" y2="372" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="823" y="365" text-anchor="middle" class="cL">1</text>

        <!-- order_customizations -->
        <rect x="1024" y="350" width="124" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="1086" y="370" text-anchor="middle" class="eL">order_</text>
        <text x="1086" y="386" text-anchor="middle" class="eL">customizations</text>
        <line x1="954" y1="372" x2="1024" y2="372" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="988" y="365" text-anchor="middle" class="cL">1</text>
        <line x1="1086" y1="394" x2="1086" y2="410" stroke="#111" stroke-width="1" fill="none" />
        <ellipse cx="1086" cy="422" rx="70" ry="12" fill="none" stroke="#111" stroke-width="1.2" />
        <text x="1086" y="426" text-anchor="middle" class="aL">id, order_item_id, blouse_color</text>

        <!-- APPLIES (ORDER → offers) — drops straight down from ORDER -->
        <text x="20" y="462" class="sL">CLUSTER C2 — Offers applied to Orders</text>
        <polygon points="417,480 471,502 417,524 363,502" fill="none" stroke="#111" stroke-width="1.8" />
        <text x="417" y="506" text-anchor="middle" class="rL">APPLIES</text>
        <line x1="417" y1="394" x2="417" y2="480" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />

        <rect x="552" y="486" width="90" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="597" y="512" text-anchor="middle" class="eL">offers</text>
        <line x1="471" y1="502" x2="552" y2="502" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="510" y="495" text-anchor="middle" class="cL">N</text>
        <line x1="597" y1="530" x2="597" y2="546" stroke="#111" stroke-width="1" fill="none" />
        <ellipse cx="597" cy="558" rx="72" ry="12" fill="none" stroke="#111" stroke-width="1.2" />
        <text x="597" y="562" text-anchor="middle" class="aL">id, title, type, value, dates</text>

        <!-- ─────────────────────────────────────────────────
           CLUSTER D: Cart & Wishlist
           y band: 620–720
      ───────────────────────────────────────────────── -->
        <text x="20" y="606" class="sL">CLUSTER D — Cart &amp; Wishlist (USER = same entity)</text>

        <!-- USER (cart) -->
        <rect x="30" y="624" width="110" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="85" y="650" text-anchor="middle" class="eL">USER</text>

        <!-- IN_CART -->
        <polygon points="238,624 292,646 238,668 184,646" fill="none" stroke="#111" stroke-width="1.8" />
        <text x="238" y="650" text-anchor="middle" class="rL">IN_CART</text>
        <line x1="140" y1="646" x2="184" y2="646" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="160" y="639" text-anchor="middle" class="cL">1</text>

        <!-- cart_items -->
        <rect x="362" y="624" width="110" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="417" y="650" text-anchor="middle" class="eL">cart_items</text>
        <line x1="292" y1="646" x2="362" y2="646" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="325" y="639" text-anchor="middle" class="cL">N</text>
        <line x1="417" y1="668" x2="417" y2="684" stroke="#111" stroke-width="1" fill="none" />
        <ellipse cx="417" cy="696" rx="74" ry="12" fill="none" stroke="#111" stroke-width="1.2" />
        <text x="417" y="700" text-anchor="middle" class="aL">id, user_id, saree_id, quantity</text>

        <!-- USER (wishlist) — separate box, same row -->
        <rect x="580" y="624" width="110" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="635" y="650" text-anchor="middle" class="eL">USER</text>

        <!-- WISHLISTS -->
        <polygon points="790,624 844,646 790,668 736,646" fill="none" stroke="#111" stroke-width="1.8" />
        <text x="790" y="650" text-anchor="middle" class="rL">WISHLISTS</text>
        <line x1="690" y1="646" x2="736" y2="646" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="712" y="639" text-anchor="middle" class="cL">1</text>

        <!-- wishlist -->
        <rect x="918" y="624" width="100" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="968" y="650" text-anchor="middle" class="eL">wishlist</text>
        <line x1="844" y1="646" x2="918" y2="646" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="879" y="639" text-anchor="middle" class="cL">N</text>
        <line x1="968" y1="668" x2="968" y2="684" stroke="#111" stroke-width="1" fill="none" />
        <ellipse cx="968" cy="696" rx="65" ry="12" fill="none" stroke="#111" stroke-width="1.2" />
        <text x="968" y="700" text-anchor="middle" class="aL">id, user_id, saree_id</text>

        <!-- ─────────────────────────────────────────────────
           CLUSTER E: Notifications, Weaver Stories, Reviews
           y band: 768–880
      ───────────────────────────────────────────────── -->
        <text x="20" y="758" class="sL">CLUSTER E — Notifications, Stories, Reviews (USER = same entity)</text>

        <!-- USER (notifications) -->
        <rect x="30" y="776" width="110" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="85" y="802" text-anchor="middle" class="eL">USER</text>

        <!-- RECEIVES -->
        <polygon points="238,776 292,798 238,820 184,798" fill="none" stroke="#111" stroke-width="1.8" />
        <text x="238" y="802" text-anchor="middle" class="rL">RECEIVES</text>
        <line x1="140" y1="798" x2="184" y2="798" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="160" y="791" text-anchor="middle" class="cL">1</text>

        <!-- notifications -->
        <rect x="362" y="776" width="120" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="422" y="802" text-anchor="middle" class="eL">notifications</text>
        <line x1="292" y1="798" x2="362" y2="798" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="325" y="791" text-anchor="middle" class="cL">N</text>
        <line x1="422" y1="820" x2="422" y2="836" stroke="#111" stroke-width="1" fill="none" />
        <ellipse cx="422" cy="848" rx="74" ry="12" fill="none" stroke="#111" stroke-width="1.2" />
        <text x="422" y="852" text-anchor="middle" class="aL">id, user_id, message, type</text>

        <!-- USER (weaver stories) -->
        <rect x="560" y="776" width="110" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="615" y="796" text-anchor="middle" class="eL">USER</text>
        <text x="615" y="810" text-anchor="middle" class="sL">(weaver)</text>

        <!-- AUTHORS -->
        <polygon points="768,776 822,798 768,820 714,798" fill="none" stroke="#111" stroke-width="1.8" />
        <text x="768" y="802" text-anchor="middle" class="rL">AUTHORS</text>
        <line x1="670" y1="798" x2="714" y2="798" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="690" y="791" text-anchor="middle" class="cL">1</text>

        <!-- weaver_stories -->
        <rect x="898" y="776" width="130" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="963" y="802" text-anchor="middle" class="eL">weaver_stories</text>
        <line x1="822" y1="798" x2="898" y2="798" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="858" y="791" text-anchor="middle" class="cL">N</text>
        <line x1="963" y1="820" x2="963" y2="836" stroke="#111" stroke-width="1" fill="none" />
        <ellipse cx="963" cy="848" rx="74" ry="12" fill="none" stroke="#111" stroke-width="1.2" />
        <text x="963" y="852" text-anchor="middle" class="aL">id, weaver_id, caption, media_path</text>

        <!-- ─────────────────────────────────────────────────
           CLUSTER F: Story Approvals + Reviews
           y band: 910–1010
      ───────────────────────────────────────────────── -->
        <text x="20" y="898" class="sL">CLUSTER F — Story Approvals &amp; Reviews</text>

        <!-- STORY APPROVED_BY — drops from weaver_stories bottom -->
        <polygon points="963,916 1017,938 963,960 909,938" fill="none" stroke="#111" stroke-width="1.8" />
        <text x="963" y="934" text-anchor="middle" class="rL">APPROVED</text>
        <text x="963" y="946" text-anchor="middle" class="rL">_BY</text>
        <line x1="963" y1="820" x2="963" y2="916" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />

        <!-- story_approvals -->
        <rect x="1038" y="920" width="110" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="1093" y="946" text-anchor="middle" class="eL">story_approvals</text>
        <line x1="1017" y1="938" x2="1038" y2="938" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <line x1="1093" y1="964" x2="1093" y2="980" stroke="#111" stroke-width="1" fill="none" />
        <ellipse cx="1093" cy="992" rx="70" ry="12" fill="none" stroke="#111" stroke-width="1.2" />
        <text x="1093" y="996" text-anchor="middle" class="aL">id, story_id, status, admin_id</text>

        <!-- USER (reviews) — separate box this cluster -->
        <rect x="30" y="920" width="110" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="85" y="946" text-anchor="middle" class="eL">USER</text>
        <text x="85" y="958" text-anchor="middle" class="sL">(buyer)</text>

        <!-- REVIEWS -->
        <polygon points="238,920 292,942 238,964 184,942" fill="none" stroke="#111" stroke-width="1.8" />
        <text x="238" y="946" text-anchor="middle" class="rL">REVIEWS</text>
        <line x1="140" y1="942" x2="184" y2="942" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="160" y="935" text-anchor="middle" class="cL">1</text>

        <!-- reviews -->
        <rect x="362" y="920" width="100" height="44" fill="none" stroke="#111" stroke-width="2" />
        <text x="412" y="946" text-anchor="middle" class="eL">reviews</text>
        <line x1="292" y1="942" x2="362" y2="942" stroke="#111" stroke-width="1.5" marker-end="url(#er)" />
        <text x="325" y="935" text-anchor="middle" class="cL">N</text>
        <line x1="412" y1="964" x2="412" y2="980" stroke="#111" stroke-width="1" fill="none" />
        <ellipse cx="412" cy="992" rx="75" ry="12" fill="none" stroke="#111" stroke-width="1.2" />
        <text x="412" y="996" text-anchor="middle" class="aL">id, buyer_id, saree_id, rating, text</text>

        <!-- ═══ LEGEND ═══ -->
        <rect x="30" y="1018" width="14" height="10" fill="none" stroke="#111" stroke-width="1.5" />
        <text x="50" y="1027" fill="#666" font-size="8" font-family="'DM Mono',monospace">Entity</text>
        <polygon points="130,1013 154,1023 130,1033 106,1023" fill="none" stroke="#111" stroke-width="1.5" />
        <text x="162" y="1027" fill="#666" font-size="8" font-family="'DM Mono',monospace">Relationship</text>
        <ellipse cx="300" cy="1023" rx="20" ry="8" fill="none" stroke="#111" stroke-width="1.2" />
        <text x="326" y="1027" fill="#666" font-size="8" font-family="'DM Mono',monospace">Attribute</text>
        <line x1="400" y1="1023" x2="424" y2="1023" stroke="#111" stroke-width="1" stroke-dasharray="4,3" fill="none" />
        <text x="430" y="1027" fill="#666" font-size="8" font-family="'DM Mono',monospace">Ref from parent (no shared
          path)</text>
        <text x="686" y="1027" fill="#bbb" font-size="7" font-family="'DM Mono',monospace">* Repeated USER boxes = same
          USER entity (standard Chen ER practice)</text>
      </svg>
      <p class="note">
        Bug fixed: removed shared x=95 vertical spine that caused black triangle fill artifact in SVG rendering.<br>
        Each USER connection is now a completely independent element. USER repeated per cluster = standard Chen ER
        notation.
      </p>
    </div>
  </div>

</body>

</html>